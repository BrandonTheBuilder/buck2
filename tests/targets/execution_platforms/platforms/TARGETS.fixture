load("@root//:rules.bzl",  "platform", "platforms", "config_setting", "target_platform")

config_setting(name="setting")

target_platform(name = "target")

platform(
    name="default",
    setting=":setting",
    allow_hybrid_fallbacks_on_failure = True,
)

platform(
    name="no_fallback",
    setting=":setting",
    allow_hybrid_fallbacks_on_failure = False,
)

platform(
    name="full_hybrid_will_failure_fallbacks",
    setting=":setting",
    use_limited_hybrid = False,
    allow_hybrid_fallbacks_on_failure = True,
)

platform(
    name="full_hybrid",
    setting=":setting",
    use_limited_hybrid = False,
)

platform(
    name="cache_uploads",
    setting=":setting",
    allow_cache_uploads = True,
)

platforms(
    name="platforms",
    platforms=[":default", ":no_fallback", ":full_hybrid", ":full_hybrid_will_failure_fallbacks", ":cache_uploads"]
)
